<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Divisi Summary</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styleadminhome2.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Admin Panel</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="admin.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="fas fa-users"></i> Halaman web</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="admin_jumlah.html"><i class="fas fa-chart-bar"></i> jumlah</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <header>
    <h1>DATA JUMLAH BEDASARKAN DIVISI</h1>
  </header>
  <main>
    <section>


      <table id="divisionSummaryTable">
        <thead>
          <tr>
            <th>Divisi</th>
            <th>Jumlah</th>
          </tr>
        </thead>
        <tbody>
          <!-- Division summary will be inserted here -->
        </tbody>
      </table>
    </section>
  </main>

  <script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS7HnODG-42qgjHQjEJRWUA98C82A8WiqR8LbdpItIj6V5w2caPqT9HB1OENWETzPqeQobib0y2mjcD/pub?output=csv';

    function csvToArray(csv) {
      const rows = csv.split("\n");
      return rows.map(row => row.split(","));
    }

    function loadData() {
      fetch(sheetUrl)
        .then(response => response.text())
        .then(csvText => {
          const data = csvToArray(csvText);
          const divisionSummary = document.querySelector("#divisionSummaryTable tbody");

          // Divisions and their count
          const divisions = [
            "Bendahara", "Sekertaris", "Dokumentasi", "Humas Internal", 
            "Humas Eksternal", "Kewirausahaan", "pendidikan", "Perkap", "Publikasi"
          ];
          const divisionCount = {};

          divisions.forEach(division => {
            divisionCount[division] = 0;
          });

          // Populate the division summary table
          for (let i = 1; i < data.length; i++) {
            const row = data[i];
            const selectedDivision = row[6].trim();
            if (divisionCount[selectedDivision] !== undefined) {
              divisionCount[selectedDivision]++;
            }
          }

          divisionSummary.innerHTML = Object.keys(divisionCount).map(division => 
            `<tr><td>${division}</td><td>${divisionCount[division]}</td></tr>`
          ).join('');
        })
        .catch(error => console.error('Error loading CSV data:', error));
    }

    function updateTableBasedOnSelection() {
      const selectedValue = document.getElementById('summarySelect').value;
      // Implement the logic based on selected summary view
      // For now, we just reload the data
      loadData();
    }

    loadData();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>
</html>
